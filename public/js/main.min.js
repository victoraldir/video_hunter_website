const urlSearchParams=new URLSearchParams(window.location.search),params=Object.fromEntries(urlSearchParams.entries());function addVideo(e){document.createTextNode("Your browser does not support the video tag.");const t=filterByContentType(e.variants,"video/mp4").url;let d=document.createElement("div");d.classList.add("col"),d.classList.add("text-center");let n=document.createElement("div");n.classList.add("tweet-card");let a=document.createElement("div");a.id=e.tweet_id;let o=document.createElement("img");o.setAttribute("onclick","replaceImgToVideo("+e.tweet_id+", '"+t+"')"),o.src=e.video_img,o.classList.add("tweet-card-image");let i=document.createElement("div");i.classList.add("card-body");let c=document.createElement("a");c.setAttribute("onclick","downloadVideo('"+t+"')"),c.classList.add("btn"),c.classList.add("btn-primary"),c.appendChild(document.createTextNode("Download"));let l=document.createElement("p");l.appendChild(c);let r=document.createElement("a");r.setAttribute("href",e.video_url),r.setAttribute("target","_blank"),r.classList.add("btn"),r.classList.add("btn-primary"),r.appendChild(document.createTextNode("Original Tweet"));let s=document.createElement("p");s.appendChild(r),a.appendChild(o),i.appendChild(l),i.appendChild(s),n.appendChild(a),n.appendChild(i),d.appendChild(n),document.getElementById("video-grid").appendChild(d)}function downloadVideo(e){enableLoading();let t=new XMLHttpRequest;t.responseType="blob",t.onload=function(e){saveBlob(e.currentTarget.response,"video.mp4")},t.open("get",e,!0),t.send()}function saveBlob(e,t){let d=document.createElement("a");d.href=window.URL.createObjectURL(e),d.download=t,d.dispatchEvent(new MouseEvent("click")),disableLoading()}function loadVideos(){disableLoading(),JSON.parse(this.responseText).Items.forEach((function(e){addVideo(e)}))}function filterByContentType(e,t){let d;return e.filter((function(e){return e.content_type===t})).forEach((function(e){d||(d=e),e.bitrate>d.bitrate&&(d=e)})),d}function enableLoading(){let e=document.createElement("div");e.classList.add("loading"),e.id="loading",document.getElementById("feed").appendChild(e)}function disableLoading(){document.getElementById("loading").remove()}function replaceImgToVideo(e,t){var d=document.getElementById(e),n=document.createElement("video");d.innerHTML="",source=t,n.classList.add("video-player"),n.setAttribute("controls","");var a=document.createElement("source");a.type="video/mp4",a.src=source,n.appendChild(a),n.autoplay=!0,d.appendChild(n)}function fetchVideos(){enableLoading();let e=new XMLHttpRequest;e.onload=loadVideos,e.open("get","https://api.myvideohunter.com/requester/"+params.u+"/list",!0),e.send()}window.onload=fetchVideos;
