const urlSearchParams=new URLSearchParams(window.location.search),params=Object.fromEntries(urlSearchParams.entries());function addVideo(e){document.createTextNode("Your browser does not support the video tag.");const t=filterByContentType(e.variants,"video/mp4").url;let d=document.createElement("div");d.classList.add("col"),d.classList.add("text-center");let n=document.createElement("div");n.classList.add("tweet-card");let o=document.createElement("div");o.id=e.tweet_id;let a=document.createElement("img");a.setAttribute("onclick","replaceImgToVideo("+e.tweet_id+", '"+t+"')"),a.src=e.video_img,a.classList.add("tweet-card-image");let i=document.createElement("div");i.classList.add("card-body");let c=document.createElement("a");c.setAttribute("onclick","downloadVideo('"+t+"')"),c.classList.add("btn"),c.classList.add("btn-primary"),c.appendChild(document.createTextNode("Download"));let r=document.createElement("p");r.appendChild(c);let l=document.createElement("a");l.setAttribute("href",e.video_url),l.setAttribute("target","_blank"),l.classList.add("btn"),l.classList.add("btn-primary"),l.appendChild(document.createTextNode("Original Tweet"));let s=document.createElement("p");s.appendChild(l),o.appendChild(a),i.appendChild(r),i.appendChild(s),n.appendChild(o),n.appendChild(i),d.appendChild(n),document.getElementById("video-grid").appendChild(d)}function downloadVideo(e){let t=new XMLHttpRequest;t.responseType="blob",t.onload=function(e){saveBlob(e.currentTarget.response,"video.mp4")},t.open("get",e,!0),t.send()}function saveBlob(e,t){let d=document.createElement("a");d.href=window.URL.createObjectURL(e),d.download=t,d.dispatchEvent(new MouseEvent("click"))}function loadVideos(){let e=JSON.parse(this.responseText);e.Items.forEach(function(e){addVideo(e)})}function filterByContentType(e,t){let d=e.filter(function(e){return e.content_type===t}),n=0;return d.forEach(function(e){e.bitrate>n&&(n=e)}),n}function replaceImgToVideo(e,t){var d=document.getElementById(e),n=document.createElement("video");d.innerHTML="",source=t,n.classList.add("video-player"),n.setAttribute("controls","");var o=document.createElement("source");o.type="video/mp4",o.src=source,n.appendChild(o),n.autoplay=!0,d.appendChild(n)}function fetchVideos(){let e=new XMLHttpRequest;e.onload=loadVideos,e.open("get","https://api.myvideohunter.com/requester/"+params.u+"/list",!0),e.send()}window.onload=fetchVideos;